# asd.favorite

Подходящие редакции:
«Первый сайт», 
«Старт», 
«Стандарт», 
«Малый бизнес», 
«Эксперт», 
«Бизнес», 
«Корпоративный портал», 
«Энтерпрайз»

**Описание**

Модуль позволяет организовать на сайте Избранное пользователей. Возможность добавлять совершенно любой материал, сортировать его по личным папкам и т.д.

Другими, простыми, словами, модуль позволяет сделать:
избранное новостей
избранное статей
избранное сообщений блогов
список отложенных товаров
Можно переименовать на другой лад, тогда у вас получатся:
список желаний (wishlist)
собственные плейлисты проигрывателей
И многое другое, все ограничивается только фантазией.

Подробнее по ссылкам:
http://dev.1c-bitrix.ru/community/webdev/user/11948/blog/public-user-favorites/
http://dev.1c-bitrix.ru/community/webdev/user/11948/blog/rating-favorites/
PS: На одном из скринов показана страничка в соцсети. Это не входит в стандартную поставку, а лишь показано что можно сделать на основе модуля.

https://dev.1c-bitrix.ru/community/webdev/user/11948/blog/public-user-favorites/

_**Установка кнопок в списке**_

Все что выше, относилось к установке кнопок на детальной странице элемента. Коротенечко рассмотрим как добавить кнопки в список. Все то же самое, кроме того, что нам надо как-то каждой кнопке передать, сколько у нее голосов, и нажимал ли на нее текущий пользователь. Для этого есть два варианта:

1. Поставить галочку "Обновить счетчик уже после загрузки страницы", и тогда все кнопки наполнятся дополнительным хитом. Кстати, если кнопки у вас внутри области кеширования внешнего компонента, то эта галочка обязательна, и ваша задача решена.

2. Есть возможность сэкономить доп.хит после загрузки страницы, если кнопки вне области кеширования находится. И если вы обладаете навыками программирования. Тогда перед вызовом цикла с элементами, вставляем такой код (вызываем одним запросом счетчики и состояния кнопок, передавая методу массив ID-ков элементов в списке):

```php
<?
if(CModule::IncludeModule('asd.favorite')) {
   foreach($arResult["ITEMS"] as $cell=>$arElement){
       $arIDs[] = $arElement['ID'];
   }
   $arFavs = CASDfavorite::GetLikesAndFavedByElementID($arIDs);
}
?> 
```
И в нужном месте вызова вставляем код компонента кнопки

```php
<?$APPLICATION->IncludeComponent("bitrix:asd.favorite.button", "", array (
   "FAV_TYPE" => "products",
   "BUTTON_TYPE" => "lik",
   "ELEMENT_ID" => $arElement["ID"],
   "GET_COUNT_AFTER_LOAD" => "N",
   "SET_COUNT" => $arFavs[$arElement["ID"]]["COUNT"],
   "FAVED" => $arFavs[$arElement["ID"]]["FAVED"]
))?>
```